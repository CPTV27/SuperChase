"use strict";(globalThis.webpackChunkmanual=globalThis.webpackChunkmanual||[]).push([[2856],{3096(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"system/review-workflow","title":"Review Workflow","description":"Content approval pipeline","source":"@site/docs/system/review-workflow.md","sourceDirName":"system","slug":"/system/review-workflow","permalink":"/system/review-workflow","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Review Workflow","description":"Content approval pipeline"}}');var s=i(4848),t=i(8453);const l={sidebar_position:5,title:"Review Workflow",description:"Content approval pipeline"},c="Review Workflow",a={},d=[{value:"Workflow States",id:"workflow-states",level:2},{value:"Review Item Structure",id:"review-item-structure",level:2},{value:"Secure Token Approval",id:"secure-token-approval",level:2},{value:"Workflow Operations",id:"workflow-operations",level:2},{value:"Create Review Item",id:"create-review-item",level:3},{value:"Check Review Pulse",id:"check-review-pulse",level:3},{value:"Agency Approve",id:"agency-approve",level:3},{value:"Agency Reject / Request Revision",id:"agency-reject--request-revision",level:3},{value:"Client Approve",id:"client-approve",level:3},{value:"Client Request Revision",id:"client-request-revision",level:3},{value:"Mark Published",id:"mark-published",level:3},{value:"List Client Reviews",id:"list-client-reviews",level:3},{value:"Audit Trail",id:"audit-trail",level:2},{value:"Integration with Notifications",id:"integration-with-notifications",level:2},{value:"Storage",id:"storage",level:2}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"review-workflow",children:"Review Workflow"})}),"\n",(0,s.jsx)(n.p,{children:"SuperChase v2.1 implements a human-in-the-loop content approval pipeline with secure token-based approvals."}),"\n",(0,s.jsx)(n.h2,{id:"workflow-states",children:"Workflow States"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"DRAFT  \u2500\u2500\u2192  AGENCY_REVIEW  \u2500\u2500\u2192  CLIENT_REVIEW  \u2500\u2500\u2192  PUBLISHED\n  \u2502              \u2502                    \u2502\n  \u2502              \u25bc                    \u25bc\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2192  REVISION  \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n           REJECTED\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"State"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Actor"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"DRAFT"})}),(0,s.jsx)(n.td,{children:"AI-generated content, pending submission"}),(0,s.jsx)(n.td,{children:"System"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"AGENCY_REVIEW"})}),(0,s.jsx)(n.td,{children:"Awaiting internal (agency) approval"}),(0,s.jsx)(n.td,{children:"You"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CLIENT_REVIEW"})}),(0,s.jsx)(n.td,{children:"Awaiting client approval"}),(0,s.jsx)(n.td,{children:"Client"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CLIENT_APPROVED"})}),(0,s.jsx)(n.td,{children:"Ready to publish"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PUBLISHED"})}),(0,s.jsx)(n.td,{children:"Live on platform"}),(0,s.jsx)(n.td,{children:"System"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"REVISION"})}),(0,s.jsx)(n.td,{children:"Needs changes (feedback provided)"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"REJECTED"})}),(0,s.jsx)(n.td,{children:"Permanently rejected"}),(0,s.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"review-item-structure",children:"Review Item Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'{\n  "id": "review-lx1abc123",\n  "clientId": "bigmuddy",\n  "type": "social",           // blog, social, gbp\n  "title": "Friday Blues Night",\n  "content": "Full post content...",\n  "status": "AGENCY_REVIEW",\n  "createdAt": "2026-01-20T10:00:00.000Z",\n  "updatedAt": "2026-01-20T10:30:00.000Z",\n  "history": [\n    { "status": "DRAFT", "timestamp": "...", "actor": "system" },\n    { "status": "AGENCY_REVIEW", "timestamp": "...", "actor": "system" }\n  ],\n  "approveToken": "a1b2c3d4...",\n  "rejectToken": "e5f6g7h8...",\n  "metadata": {\n    "lastFeedback": "Add more excitement to the intro"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"secure-token-approval",children:"Secure Token Approval"}),"\n",(0,s.jsx)(n.p,{children:"Review items include secure tokens for one-click approval via email or Slack:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Approve URL:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://superchase-production.up.railway.app/api/review/{id}/approve?token={approveToken}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Reject with feedback:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://superchase-production.up.railway.app/api/review/{id}/reject?token={rejectToken}&feedback=Needs+stronger+CTA\n"})}),"\n",(0,s.jsx)(n.p,{children:"Tokens are HMAC-SHA256 hashes, valid only for the specific item and action."}),"\n",(0,s.jsx)(n.h2,{id:"workflow-operations",children:"Workflow Operations"}),"\n",(0,s.jsx)(n.h3,{id:"create-review-item",children:"Create Review Item"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST -H "X-API-Key: KEY" \\\n  -d \'{\n    "clientId": "bigmuddy",\n    "type": "social",\n    "title": "Friday Blues Night",\n    "content": "The Mississippi whispers tonight..."\n  }\' \\\n  https://superchase-production.up.railway.app/api/review\n'})}),"\n",(0,s.jsx)(n.p,{children:"Response includes approve/reject URLs:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "item": { ... },\n  "approveUrl": "https://.../api/review/review-abc/approve?token=xyz",\n  "rejectUrl": "https://.../api/review/review-abc/reject?token=xyz"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"check-review-pulse",children:"Check Review Pulse"}),"\n",(0,s.jsx)(n.p,{children:"Get aggregate status of all pending reviews:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "X-API-Key: KEY" https://superchase-production.up.railway.app/api/review/pulse\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "pulse": "Agency Review Pulse",\n  "counts": {\n    "agencyReview": 3,\n    "clientReview": 2,\n    "readyToPublish": 1,\n    "needsRevision": 0\n  },\n  "agencyPending": [\n    {\n      "id": "review-abc",\n      "clientId": "bigmuddy",\n      "title": "Blues Night Post",\n      "type": "social",\n      "approveUrl": "...",\n      "rejectUrl": "..."\n    }\n  ],\n  "clientPending": [...],\n  "readyToPublish": [...],\n  "needsRevision": [...]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"agency-approve",children:"Agency Approve"}),"\n",(0,s.jsx)(n.p,{children:"Click the approveUrl or call directly:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl "https://superchase-production.up.railway.app/api/review/review-abc/approve?token=xyz"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Moves item to ",(0,s.jsx)(n.code,{children:"CLIENT_REVIEW"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"agency-reject--request-revision",children:"Agency Reject / Request Revision"}),"\n",(0,s.jsx)(n.p,{children:"Without feedback (permanent reject):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl "https://superchase-production.up.railway.app/api/review/review-abc/reject?token=xyz"\n'})}),"\n",(0,s.jsx)(n.p,{children:"With feedback (revision request):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl "https://superchase-production.up.railway.app/api/review/review-abc/reject?token=xyz&feedback=Add+a+stronger+CTA"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"client-approve",children:"Client Approve"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST -H "X-API-Key: KEY" \\\n  -d \'{"clientId": "bigmuddy"}\' \\\n  https://superchase-production.up.railway.app/api/review/review-abc/client-approve\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Moves item to ",(0,s.jsx)(n.code,{children:"CLIENT_APPROVED"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"client-request-revision",children:"Client Request Revision"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST -H "X-API-Key: KEY" \\\n  -d \'{"clientId": "bigmuddy", "feedback": "Can we make it more upbeat?"}\' \\\n  https://superchase-production.up.railway.app/api/review/review-abc/revision\n'})}),"\n",(0,s.jsx)(n.h3,{id:"mark-published",children:"Mark Published"}),"\n",(0,s.jsx)(n.p,{children:"After posting to platform:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST -H "X-API-Key: KEY" \\\n  -d \'{"platform": "twitter", "url": "https://twitter.com/..."}\' \\\n  https://superchase-production.up.railway.app/api/review/review-abc/publish\n'})}),"\n",(0,s.jsx)(n.h3,{id:"list-client-reviews",children:"List Client Reviews"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "X-API-Key: KEY" https://superchase-production.up.railway.app/api/review/list/bigmuddy\n'})}),"\n",(0,s.jsx)(n.h2,{id:"audit-trail",children:"Audit Trail"}),"\n",(0,s.jsx)(n.p,{children:"Every status change is logged to:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["The item's ",(0,s.jsx)(n.code,{children:"history"})," array"]}),"\n",(0,s.jsx)(n.li,{children:"The manifest.jsonl file"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example history entry:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "status": "AGENCY_REVIEW",\n  "timestamp": "2026-01-20T10:30:00.000Z",\n  "actor": "agency",\n  "note": "Approved by agency",\n  "feedback": ""\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"integration-with-notifications",children:"Integration with Notifications"}),"\n",(0,s.jsxs)(n.p,{children:["The review pulse endpoint (",(0,s.jsx)(n.code,{children:"/api/review/pulse"}),") is designed for integration with:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Morning briefings (George reads pending counts)"}),"\n",(0,s.jsx)(n.li,{children:"Slack notifications"}),"\n",(0,s.jsx)(n.li,{children:"Dashboard widgets"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"storage",children:"Storage"}),"\n",(0,s.jsx)(n.p,{children:"Review queue is stored at:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/memory/review_queue.json\n"})}),"\n",(0,s.jsx)(n.p,{children:"All changes are also appended to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/manifest.jsonl\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["See also: ",(0,s.jsx)(n.a,{href:"/system/agency-mode",children:"Agency Mode"}),", ",(0,s.jsx)(n.a,{href:"/operations/client-portals",children:"Client Portals"})]})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>c});var r=i(6540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);