"use strict";(globalThis.webpackChunkmanual=globalThis.webpackChunkmanual||[]).push([[1644],{1381(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"system/agency-mode","title":"Agency Mode","description":"Multi-tenant client architecture","source":"@site/docs/system/agency-mode.md","sourceDirName":"system","slug":"/system/agency-mode","permalink":"/system/agency-mode","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Agency Mode","description":"Multi-tenant client architecture"}}');var s=i(4848),r=i(8453);const a={sidebar_position:4,title:"Agency Mode",description:"Multi-tenant client architecture"},l="Agency Mode",d={},c=[{value:"Architecture",id:"architecture",level:2},{value:"Tenant Manager",id:"tenant-manager",level:2},{value:"Tenant Directory Structure",id:"tenant-directory-structure",level:3},{value:"Configuration Schema",id:"configuration-schema",level:3},{value:"Configured Tenants",id:"configured-tenants",level:2},{value:"Style Engine",id:"style-engine",level:2},{value:"Brand Archetypes",id:"brand-archetypes",level:3},{value:"Style Wash",id:"style-wash",level:3},{value:"Voice Guidelines",id:"voice-guidelines",level:3},{value:"API Usage",id:"api-usage",level:2},{value:"List Tenants",id:"list-tenants",level:3},{value:"Get Tenant Config",id:"get-tenant-config",level:3},{value:"Create Tenant",id:"create-tenant",level:3},{value:"Update Tenant",id:"update-tenant",level:3},{value:"Routing to Tenants",id:"routing-to-tenants",level:2},{value:"Adding a New Tenant",id:"adding-a-new-tenant",level:2},{value:"Caching",id:"caching",level:2}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"agency-mode",children:"Agency Mode"})}),"\n",(0,s.jsx)(n.p,{children:'SuperChase v2.1 introduces multi-tenant "Agency Mode" for managing multiple client brands through a unified pipeline.'}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"                     +------------------+\n                     |  Tenant Manager  |\n                     |  (Orchestrator)  |\n                     +--------+---------+\n                              |\n        +---------------------+---------------------+\n        |                     |                     |\n        v                     v                     v\n+---------------+    +---------------+    +---------------+\n|   bigmuddy    |    |    studioc    |    |   tuthill     |\n| /clients/bm/  |    | /clients/sc/  |    | /clients/th/  |\n+-------+-------+    +-------+-------+    +-------+-------+\n        |                     |                     |\n        +----------+----------+----------+----------+\n                   |                     |\n                   v                     v\n            +-------------+       +-------------+\n            |   Shared    |       |   Style     |\n            |  Pipeline   |       |   Engine    |\n            +-------------+       +-------------+\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Key principle:"})," Isolated client data, shared processing pipeline."]}),"\n",(0,s.jsx)(n.h2,{id:"tenant-manager",children:"Tenant Manager"}),"\n",(0,s.jsxs)(n.p,{children:["Location: ",(0,s.jsx)(n.code,{children:"/core/tenant-manager.js"})]}),"\n",(0,s.jsx)(n.p,{children:"The Tenant Manager handles:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Client configuration loading and caching"}),"\n",(0,s.jsx)(n.li,{children:"Directory structure initialization"}),"\n",(0,s.jsx)(n.li,{children:"Cross-tenant routing"}),"\n",(0,s.jsx)(n.li,{children:"Tenant CRUD operations"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"tenant-directory-structure",children:"Tenant Directory Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"/clients/{clientId}/\n  config.json      # Tenant configuration\n  assets/          # Client media files\n  content/         # Generated content\n  queue/           # Queue state (queue.json)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"configuration-schema",children:"Configuration Schema"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'{\n  "id": "bigmuddy",\n  "name": "Big Muddy Inn",\n  "businessType": "hospitality",\n  "branding": {\n    "voice": "warm_southern",\n    "tone": "friendly",\n    "colors": { "primary": "#1A5653", "accent": "#DAA520" },\n    "fonts": { "heading": "Playfair Display", "body": "Open Sans" }\n  },\n  "seo": {\n    "primaryKeywords": ["blues music venue", "natchez mississippi"],\n    "localKeywords": ["mississippi river", "live music"],\n    "contentPillars": ["Blues heritage", "Southern hospitality"],\n    "competitors": ["competitor1.com"]\n  },\n  "integrations": {\n    "gbp": { "enabled": true, "locationId": "abc123" },\n    "website": { "platform": "wordpress", "apiKey": "..." },\n    "social": { "platforms": ["instagram", "facebook"] }\n  },\n  "workflows": {\n    "autoPublish": false,\n    "requireApproval": true,\n    "notifyOnContent": true\n  },\n  "createdAt": "2026-01-01T00:00:00.000Z",\n  "updatedAt": "2026-01-20T00:00:00.000Z"\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"configured-tenants",children:"Configured Tenants"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"ID"}),(0,s.jsx)(n.th,{children:"Name"}),(0,s.jsx)(n.th,{children:"Archetype"}),(0,s.jsx)(n.th,{children:"Business Type"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bigmuddy"})}),(0,s.jsx)(n.td,{children:"Big Muddy Inn"}),(0,s.jsx)(n.td,{children:"Southern Storyteller"}),(0,s.jsx)(n.td,{children:"Hospitality"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"cptv"})}),(0,s.jsx)(n.td,{children:"Chase Pierson TV"}),(0,s.jsx)(n.td,{children:"Tech Rebellion"}),(0,s.jsx)(n.td,{children:"Personal Brand"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"studioc"})}),(0,s.jsx)(n.td,{children:"Studio C"}),(0,s.jsx)(n.td,{children:"Cultural Archivist"}),(0,s.jsx)(n.td,{children:"Production"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tuthill"})}),(0,s.jsx)(n.td,{children:"Tuthill Design"}),(0,s.jsx)(n.td,{children:"Visionary Artist"}),(0,s.jsx)(n.td,{children:"Design"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"utopia"})}),(0,s.jsx)(n.td,{children:"Utopia Studios"}),(0,s.jsx)(n.td,{children:"Legendary Host"}),(0,s.jsx)(n.td,{children:"Recording Studio"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"style-engine",children:"Style Engine"}),"\n",(0,s.jsxs)(n.p,{children:["Location: ",(0,s.jsx)(n.code,{children:"/lib/style-engine.js"})]}),"\n",(0,s.jsx)(n.p,{children:"The Style Engine applies brand-specific voice and visual style to all generated content."}),"\n",(0,s.jsx)(n.h3,{id:"brand-archetypes",children:"Brand Archetypes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Archetype"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Use For"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"visionary_artist"})}),(0,s.jsx)(n.td,{children:"Sophisticated, evocative, rhythmic"}),(0,s.jsx)(n.td,{children:"Design, architecture"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"cultural_archivist"})}),(0,s.jsx)(n.td,{children:"Intellectual, collaborative, gritty"}),(0,s.jsx)(n.td,{children:"Production, documentary"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tech_rebellion"})}),(0,s.jsx)(n.td,{children:"Immediate, visceral, urgent"}),(0,s.jsx)(n.td,{children:"Tech, innovation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"legendary_host"})}),(0,s.jsx)(n.td,{children:"Storied, high-fidelity, warm"}),(0,s.jsx)(n.td,{children:"Studios, venues"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"warm_southern"})}),(0,s.jsx)(n.td,{children:"Warm, welcoming, heritage-rich"}),(0,s.jsx)(n.td,{children:"Hospitality, regional"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"style-wash",children:"Style Wash"}),"\n",(0,s.jsx)(n.p,{children:"Apply brand voice to content prompts:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import { applyStyleWash } from './lib/style-engine.js';\n\n// Returns prompt with brand voice applied\nconst styledPrompt = applyStyleWash('bigmuddy', 'social', 'Announce Friday blues night');\n"})}),"\n",(0,s.jsx)(n.p,{children:"Content types supported:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"image"})," - Photography and visual prompts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"social"})," - Social media posts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"blog"})," - Long-form content"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"caption"})," - Photo captions"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"voice-guidelines",children:"Voice Guidelines"}),"\n",(0,s.jsx)(n.p,{children:"Each tenant has defined voice guidelines:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'{\n  philosophy: "Where the river meets the blues...",\n  tone: ["Warm", "Welcoming", "Storytelling"],\n  doSay: ["Paint pictures with words", "Let the history speak"],\n  dontSay: ["Generic hospitality language", "Rushed tone"],\n  samplePhrases: ["Where the Mississippi whispers its secrets..."]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"api-usage",children:"API Usage"}),"\n",(0,s.jsx)(n.h3,{id:"list-tenants",children:"List Tenants"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "X-API-Key: KEY" https://superchase-production.up.railway.app/api/tenants\n'})}),"\n",(0,s.jsx)(n.h3,{id:"get-tenant-config",children:"Get Tenant Config"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "X-API-Key: KEY" https://superchase-production.up.railway.app/api/tenants/bigmuddy\n'})}),"\n",(0,s.jsx)(n.h3,{id:"create-tenant",children:"Create Tenant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST -H "X-API-Key: KEY" \\\n  -d \'{"id":"newclient","name":"New Client","businessType":"retail"}\' \\\n  https://superchase-production.up.railway.app/api/tenants\n'})}),"\n",(0,s.jsx)(n.h3,{id:"update-tenant",children:"Update Tenant"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X PUT -H "X-API-Key: KEY" \\\n  -d \'{"branding":{"voice":"legendary_host"}}\' \\\n  https://superchase-production.up.railway.app/api/tenants/bigmuddy\n'})}),"\n",(0,s.jsx)(n.h2,{id:"routing-to-tenants",children:"Routing to Tenants"}),"\n",(0,s.jsx)(n.p,{children:"The Tenant Manager routes API calls to tenant-specific handlers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import tenantManager from './core/tenant-manager.js';\n\n// Route a GBP action to a specific tenant\nconst result = await tenantManager.routeToTenant('bigmuddy', 'gbp', 'post', {\n  text: 'New event this Friday!'\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"Supported spokes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gbp"})," - Google Business Profile"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"content"})," - Brainstorm/content generation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"portal"})," - Queue management"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"adding-a-new-tenant",children:"Adding a New Tenant"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create via API:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST -H "X-API-Key: KEY" \\\n  -d \'{"id":"newclient","name":"New Client Co","businessType":"consulting"}\' \\\n  https://superchase-production.up.railway.app/api/tenants\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Update config with branding:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X PUT -H "X-API-Key: KEY" \\\n  -d \'{"branding":{"voice":"visionary_artist"},"seo":{"primaryKeywords":["consulting","strategy"]}}\' \\\n  https://superchase-production.up.railway.app/api/tenants/newclient\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Add style prompts to ",(0,s.jsx)(n.code,{children:"/lib/style-engine.js"})," (optional, uses defaults otherwise)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"caching",children:"Caching"}),"\n",(0,s.jsx)(n.p,{children:"Tenant configs are cached for 5 minutes to reduce disk reads. Cache is invalidated on update."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["See also: ",(0,s.jsx)(n.a,{href:"/system/review-workflow",children:"Review Workflow"}),", ",(0,s.jsx)(n.a,{href:"/operations/client-portals",children:"Client Portals"})]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>l});var t=i(6540);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);